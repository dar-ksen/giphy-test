(this["webpackJsonpgiphy-test"]=this["webpackJsonpgiphy-test"]||[]).push([[0],{18:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(11),s=n.n(r),i=n(5),u=n(2),o=(n(18),n(7)),l=n.n(o),d=n(0),j=function(e){var t=e.children,n=e.className,c=l()("container",n);return Object(d.jsx)("div",{className:c,children:t})},b=function(e){var t=e.children;return Object(d.jsx)("header",{className:"p-3 bg-dark text-white",children:Object(d.jsx)(j,{children:Object(d.jsx)("div",{className:"d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start",children:t})})})},h=n(4),f=n.n(h),m=n(10),g=n(12),p=(n(21),n(8)),O=n(13),x=(n(22),function(e){var t=e.pictures,n=e.onPictureHandler;return Object(d.jsx)("div",{className:"col-sm-3 mb-3",children:Object(d.jsx)("div",{className:"picture-item",children:t.map((function(e){var t=e.tag,c=e.url,a=e.alt,r=e.width,s=e.height,i=e.id;return Object(d.jsx)("img",{onClick:function(){return n(t)},src:c,alt:a,width:r,height:s},i)}))})})}),v=["id"],y=function(e){var t,n=e.pictures,c=e.onPictureHandler;return Object(d.jsx)("div",{className:"row mb-3",children:(t=n,t.map((function(e){e.id;var t=Object(O.a)(e,v);return Object(d.jsx)(x,Object(p.a)({onPictureHandler:c},t),e.id)})))})},w=function(e){var t=e.pictures,n=e.isGroup,a=e.onPictureHandler;return 0===t.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430."}),Object(d.jsx)("p",{children:"\u0427\u0442\u043e\u0431\u044b \u0438\u0445 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0432\u0435\u0434\u0438\u0442\u044c \u0442\u0435\u0433 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043a\u043d\u043e\u043f\u043a\u0443 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c."})]}):n?Object(d.jsx)(d.Fragment,{children:Array.from(new Set(t.map((function(e){return e.tag})))).map((function(e){var n=t.filter((function(t){return t.tag===e}));return Object(d.jsxs)(c.Fragment,{children:[Object(d.jsx)("h2",{children:e}),Object(d.jsx)(y,{pictures:n,onPictureHandler:a})]},e)}))}):Object(d.jsx)(y,{pictures:t,onPictureHandler:a})},N=(n(23),function(e){var t=e.id,n=e.statys,a=e.message,r=e.onMessageDelete;Object(c.useEffect)((function(){var e=setTimeout((function(){console.log("message ".concat(t)),r(t)}),1e3);return function(){clearTimeout(e)}}),[t,r]);var s=l()("toast message-item fade show",n);return Object(d.jsxs)("div",{className:s,role:"alert","aria-live":"assertive","aria-atomic":"true",children:[Object(d.jsxs)("div",{className:"message-item__header toast-header",children:[Object(d.jsx)("strong",{className:"me-auto",children:n}),Object(d.jsx)("button",{onClick:function(){return r(t)},type:"button",className:"btn-close","data-bs-dismiss":"toast","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]}),Object(d.jsx)("div",{className:"toast-body",children:a})]})}),k=(n(24),function(e){var t=e.messages,n=e.onMessageDelete;return Object(d.jsx)("div",{className:"toast-container message-list",children:t.map((function(e){return Object(d.jsx)(N,Object(p.a)({onMessageDelete:n},e),e.id)}))})}),P=["test","da","sort","integral","arrat","exelent","terror","master","sould"],_=new function e(){var t=this;Object(g.a)(this,e),this._apiBase="https://api.giphy.com/v1/gifs",this._apiKey="gTJAO48YcpmrADUyo4opy4ES4g7iDBxx",this.getResource=function(){var e=Object(m.a)(f.a.mark((function e(n){var c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:if((c=e.sent).ok){e.next=7;break}throw(a=new Error("Could not fetch ".concat(n,", received ").concat(c.status))).status=c.status,a;case 7:return e.next=9,c.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getRandomePicture=Object(m.a)(f.a.mark((function e(){var n,c,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"",c="/random?api_key=".concat(t._apiKey,"&tag=").concat(n),e.next=4,t.getResource(c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))},C=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(u.a)(r,2),o=s[0],l=s[1],h=Object(c.useState)(!1),f=Object(u.a)(h,2),m=f[0],g=f[1],p=Object(c.useState)(!1),O=Object(u.a)(p,2),x=O[0],v=O[1],y=Object(c.useState)([]),N=Object(u.a)(y,2),C=N[0],M=N[1],S=function(e,t){if(""!==t){var n=(new Date).getUTCMilliseconds();M((function(c){return[].concat(Object(i.a)(c),[{id:n,statys:e,message:t}])}))}},D=Object(c.useCallback)((function(e){v(!0);var t=e.split(",").map((function(e){return e.trim()})),n=t.map((function(e){return _.getRandomePicture(e)})),c={tag:e,id:"",pictures:[]};Promise.all(n).then((function(e){e.forEach((function(e,n){if(0===e.data.length)S("error","\u041f\u043e \u0442\u044d\u0433\u0443 ".concat(t[n]," \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"));else{var a={id:e.data.id,tag:t[n],url:e.data.image_url,width:e.data.image_width,height:e.data.image_height,alt:e.data.title};c.id+=e.data.id,c.pictures.push(a)}})),0!==c.pictures.length&&a((function(e){return[].concat(Object(i.a)(e),[c])})),v(!1)})).catch((function(e){v(!1),S("error","\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 http \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0442\u0430\u0442\u0443\u0441 - ".concat(e.status))}))}),[]);return Object(c.useEffect)((function(){if("delay"===o){var e=setInterval((function(){var e=function(){var e=Math.floor(Math.random()*P.length);return P[e]}();D(e)}),5e3);return function(){return clearInterval(e)}}}),[o,D]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(b,{children:Object(d.jsxs)("div",{className:"input-group",children:[Object(d.jsx)("input",{onChange:function(e){l(e.target.value.replace(/[^a-z, ]/gi,""))},name:"tag",value:o,type:"text",className:"form-control",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u0433"}),Object(d.jsx)("button",{className:"btn btn-success",disabled:x,onClick:function(){""!==o?D(o):S("warning","\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435 '\u0442\u0435\u0433'")},children:x?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),Object(d.jsx)("button",{className:"btn btn-danger",disabled:0===n.length,onClick:function(){a([]),l(""),S("succses","\u041e\u0447\u0438\u0449\u0435\u043d\u043e")},children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"}),Object(d.jsx)("button",{className:"btn btn-primary",onClick:function(){g(!m)},children:m?"\u0420\u0430\u0437\u0433\u0440\u0443\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0413\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})}),Object(d.jsx)(j,{className:"py-5",children:Object(d.jsx)(w,{pictures:n,isGroup:m,onPictureHandler:function(e){l(e)}})}),Object(d.jsx)(k,{messages:C,onMessageDelete:function(e){var t=C.findIndex((function(t){return t.id===e}));M((function(){return[].concat(Object(i.a)(C.slice(0,t)),Object(i.a)(C.slice(t+1)))}))}})]})};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.d63dae9d.chunk.js.map